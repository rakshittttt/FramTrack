
{% extends "base.html" %}

{% block title %}Search Results for "{{ query }}"{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <a href="/" style="color: #4a7c59; text-decoration: none;">← {{ get_text('back_to_companies') }}</a>
</div>

<h1 style="color: #2c5530; margin-bottom: 1rem;">{% if current_lang == 'hi' %}"{{ query }}" के लिए खोज परिणाम{% elif current_lang == 'pa' %}"{{ query }}" ਲਈ ਖੋਜ ਨਤੀਜੇ{% else %}Search Results for "{{ query }}"{% endif %}</h1>

{% if results %}
    <p style="color: #666; margin-bottom: 2rem;">{% if current_lang == 'hi' %}{{ results|length }} कंपनी(यां) आपकी खोज से मेल खाती हैं:{% elif current_lang == 'pa' %}{{ results|length }} ਕੰਪਨੀ(ਆਂ) ਤੁਹਾਡੀ ਖੋਜ ਨਾਲ ਮੇਲ ਖਾਂਦੀ ਹੈ:{% else %}Found {{ results|length }} company(ies) matching your search:{% endif %}</p>
    
    <div class="company-grid">
        {% for company in results %}
        <div class="card">
            <div class="rank-badge">Sales Rank #{{ company.sales_rank }}</div>
            <h2 style="color: #2c5530; margin-bottom: 10px;">{{ company.name }}</h2>
            
            <div style="margin: 15px 0;">
                <strong>{{ get_text('annual_sales') }}:</strong> {{ "{:,}".format(company.annual_sales) }} {% if current_lang == 'hi' %}इकाई{% elif current_lang == 'pa' %}ਯੂਨਿਟ{% else %}units{% endif %}<br>
                <strong>{{ get_text('price_range') }}:</strong> {{ company.price_range }}<br>
                <strong>{{ get_text('rating') }}:</strong> 
                <span class="rating">
                    {% for i in range(5) %}
                        {% if i < company.avg_rating %}⭐{% else %}☆{% endif %}
                    {% endfor %}
                </span>
                {{ company.avg_rating }}/5 ({{ company.total_reviews }} {% if current_lang == 'hi' %}समीक्षाएं{% elif current_lang == 'pa' %}ਸਮੀਖਿਆਵਾਂ{% else %}reviews{% endif %})
            </div>
            
            <div style="margin: 15px 0;">
                <strong>Popular Models:</strong>
                <ul style="margin-left: 20px; margin-top: 5px;">
                    {% for model in company.popular_models %}
                    <li>{{ model }}</li>
                    {% endfor %}
                </ul>
            </div>
            
            <a href="/company/{{ company.id }}" class="btn">View Reviews & Details</a>
        </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card" style="text-align: center; padding: 3rem;">
        <h2 style="color: #666;">No results found</h2>
        <p style="color: #666; margin: 1rem 0;">Sorry, we couldn't find any companies or models matching "{{ query }}".</p>
        <p style="color: #666;">Try searching for:</p>
        <ul style="list-style: none; padding: 0; margin-top: 1rem;">
            <li>• Company names (John Deere, Mahindra, etc.)</li>
            <li>• Tractor models (5075E, 4540, etc.)</li>
            <li>• General terms (tractor, farming, etc.)</li>
        </ul>
        <a href="/" class="btn" style="margin-top: 1rem;">View All Top Companies</a>
    </div>
{% endif %}
{% endblock %}
